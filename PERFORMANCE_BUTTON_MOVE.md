# æ€§èƒ½æŒ‰é’®ç§»è‡³å³ä¾§å·¥å…·æ 

## ä¿®æ”¹æ¦‚è¿°

å°†åŸæœ¬å›ºå®šåœ¨å³ä¸‹è§’çš„æ€§èƒ½è°ƒè¯•æŒ‰é’®ç§»åŠ¨åˆ°å³ä¾§å·¥å…·æ ä¸­ï¼Œæä¾›æ›´ç»Ÿä¸€çš„ç•Œé¢ä½“éªŒã€‚

## ä¿®æ”¹å†…å®¹

### 1. Toolbarç»„ä»¶æ›´æ–° (`src/panel/components/Toolbar.svelte`)

#### æ–°å¢åŠŸèƒ½
- æ·»åŠ äº†æ€§èƒ½è°ƒè¯•æŒ‰é’®åˆ°å·¥å…·æ 
- ä½¿ç”¨å›¾è¡¨å›¾æ ‡è¡¨ç¤ºæ€§èƒ½è°ƒè¯•åŠŸèƒ½
- ä¿æŒä¸å…¶ä»–æŒ‰é’®ä¸€è‡´çš„æ ·å¼å’Œäº¤äº’

#### ä»£ç å˜æ›´
```typescript
// æ–°å¢æ€§èƒ½è°ƒè¯•å™¨æ§åˆ¶å±æ€§
export let onTogglePerformanceDebugger: () => void;

// æ–°å¢æ€§èƒ½è°ƒè¯•å™¨å¤„ç†å‡½æ•°
function handlePerformanceDebugger() {
  onTogglePerformanceDebugger();
}
```

#### æŒ‰é’®å¸ƒå±€
```svelte
<!-- æ€§èƒ½è°ƒè¯• -->
<button
  class="toolbar-button"
  on:click={handlePerformanceDebugger}
  title="æ€§èƒ½è°ƒè¯•å™¨ (Ctrl+Shift+D)"
>
  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
  </svg>
</button>
```

### 2. PerformanceDebuggerç»„ä»¶é‡æ„ (`src/panel/components/PerformanceDebugger.svelte`)

#### ç§»é™¤å›ºå®šæŒ‰é’®
- åˆ é™¤äº†å›ºå®šåœ¨å³ä¸‹è§’çš„åœ†å½¢è°ƒè¯•æŒ‰é’®
- ç§»é™¤äº†ç›¸å…³çš„CSSæ ·å¼
- ä¿ç•™äº†è°ƒè¯•é¢æ¿çš„å®Œæ•´åŠŸèƒ½

#### æ¥å£å˜æ›´
```typescript
// å°†isVisibleæ”¹ä¸ºå¯å¯¼å‡ºçš„å±æ€§
export let isVisible = false;

// å°†toggleDebuggeræ”¹ä¸ºå¯å¯¼å‡ºçš„å‡½æ•°
export function toggleDebugger() {
  isVisible = !isVisible;
  if (isVisible) {
    updateStats();
    updateInterval = setInterval(updateStats, 1000);
  } else {
    clearInterval(updateInterval);
  }
}
```

#### ç§»é™¤çš„æ ·å¼
```css
/* åˆ é™¤äº†ä»¥ä¸‹æ ·å¼ */
.debug-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: #6366f1;
  color: white;
  /* ... */
}
```

### 3. ChatPanelç»„ä»¶é›†æˆ (`src/panel/components/ChatPanel.svelte`)

#### æ–°å¢å¯¼å…¥å’Œå¼•ç”¨
```typescript
import PerformanceDebugger from './PerformanceDebugger.svelte';

let performanceDebugger: PerformanceDebugger;
```

#### æ–°å¢æ§åˆ¶å‡½æ•°
```typescript
function handleTogglePerformanceDebugger() {
  if (performanceDebugger) {
    performanceDebugger.toggleDebugger();
  }
}
```

#### ç»„ä»¶é›†æˆ
```svelte
<!-- Right Toolbar -->
<Toolbar onTogglePerformanceDebugger={handleTogglePerformanceDebugger} />

<!-- Performance Debugger -->
<PerformanceDebugger bind:this={performanceDebugger} />
```

### 4. Appç»„ä»¶æ¸…ç† (`src/panel/App.svelte`)

#### ç§»é™¤é‡å¤å¼•ç”¨
- ä»App.svelteä¸­ç§»é™¤äº†PerformanceDebuggerçš„å¯¼å…¥
- åˆ é™¤äº†é‡å¤çš„æ€§èƒ½è°ƒè¯•å™¨ç»„ä»¶å®ä¾‹

## ç•Œé¢å¸ƒå±€å˜åŒ–

### ä¿®æ”¹å‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”
â”‚                                     â”‚  â”‚
â”‚ Main Content Area                   â”‚ğŸ”§â”‚ â† å³ä¾§å·¥å…·æ 
â”‚ - Welcome Screen / Chat Messages    â”‚  â”‚
â”‚                                     â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ Model Selector                      â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ Input Area                          â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜
                                    ğŸ”§ â† å›ºå®šçš„æ€§èƒ½æŒ‰é’®
```

### ä¿®æ”¹å
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”
â”‚                                     â”‚  â”‚
â”‚ Main Content Area                   â”‚ğŸ“Šâ”‚ â† æ€§èƒ½è°ƒè¯•æŒ‰é’®
â”‚ - Welcome Screen / Chat Messages    â”‚ğŸ”§â”‚   é›†æˆåˆ°å·¥å…·æ 
â”‚                                     â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ Model Selector                      â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ Input Area                          â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜
```

## å·¥å…·æ æŒ‰é’®é¡ºåº

ç°åœ¨å³ä¾§å·¥å…·æ çš„æŒ‰é’®ä»ä¸Šåˆ°ä¸‹æ’åˆ—ä¸ºï¼š

1. **æ–°å»ºå¯¹è¯** (+) - åˆ›å»ºæ–°çš„å¯¹è¯ä¼šè¯
2. **æ¸…ç©ºå¯¹è¯** (ğŸ—‘ï¸) - æ¸…ç©ºå½“å‰å¯¹è¯
3. **å¯¼å‡ºå¯¹è¯** (ğŸ“¥) - å¯¼å‡ºå¯¹è¯è®°å½•ï¼ˆé¢„ç•™ï¼‰
4. **æ€§èƒ½è°ƒè¯•** (ğŸ“Š) - æ‰“å¼€æ€§èƒ½è°ƒè¯•å™¨
5. **è®¾ç½®** (âš™ï¸) - æ‰“å¼€è®¾ç½®é¡µé¢

## åŠŸèƒ½ä¿æŒ

### ä¿ç•™çš„åŠŸèƒ½
- âœ… é”®ç›˜å¿«æ·é”® `Ctrl+Shift+D` ä»ç„¶æœ‰æ•ˆ
- âœ… æ€§èƒ½è°ƒè¯•é¢æ¿çš„æ‰€æœ‰åŠŸèƒ½å®Œæ•´ä¿ç•™
- âœ… å®æ—¶æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡
- âœ… å†…å­˜ä½¿ç”¨ç›‘æ§
- âœ… æ•°å­¦å…¬å¼ç¼“å­˜ç»Ÿè®¡

### æ”¹è¿›çš„ä½“éªŒ
- âœ… æŒ‰é’®ä½ç½®æ›´åŠ ç»Ÿä¸€å’Œç›´è§‚
- âœ… ä¸å…¶ä»–å·¥å…·æ æŒ‰é’®æ ·å¼ä¸€è‡´
- âœ… å·¥å…·æç¤ºæ˜¾ç¤ºå¿«æ·é”®ä¿¡æ¯
- âœ… æ‚¬åœæ•ˆæœå’ŒåŠ¨ç”»ä¿æŒä¸€è‡´

## æŠ€æœ¯ç»†èŠ‚

### ç»„ä»¶é€šä¿¡
ä½¿ç”¨äº†Svelteçš„ç»„ä»¶ç»‘å®šå’Œå‡½æ•°ä¼ é€’æœºåˆ¶ï¼š

```typescript
// ChatPanelä¸­ç»‘å®šPerformanceDebuggerå®ä¾‹
<PerformanceDebugger bind:this={performanceDebugger} />

// é€šè¿‡å‡½æ•°è°ƒç”¨æ§åˆ¶è°ƒè¯•å™¨
function handleTogglePerformanceDebugger() {
  if (performanceDebugger) {
    performanceDebugger.toggleDebugger();
  }
}

// å°†æ§åˆ¶å‡½æ•°ä¼ é€’ç»™Toolbar
<Toolbar onTogglePerformanceDebugger={handleTogglePerformanceDebugger} />
```

### æ ·å¼ä¸€è‡´æ€§
æ€§èƒ½è°ƒè¯•æŒ‰é’®ä½¿ç”¨ä¸å…¶ä»–å·¥å…·æ æŒ‰é’®ç›¸åŒçš„æ ·å¼ï¼š

```css
.toolbar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border: none;
  background: transparent;
  color: #6b7280;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}
```

## å…¼å®¹æ€§

- âœ… ä¿æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½
- âœ… é”®ç›˜å¿«æ·é”®ç»§ç»­å·¥ä½œ
- âœ… æ€§èƒ½ç›‘æ§åŠŸèƒ½å®Œæ•´
- âœ… å‘åå…¼å®¹

## ç”¨æˆ·ä½“éªŒæå‡

### 1. ç•Œé¢ç»Ÿä¸€æ€§
- æ‰€æœ‰åŠŸèƒ½æŒ‰é’®é›†ä¸­åœ¨å³ä¾§å·¥å…·æ 
- æ¶ˆé™¤äº†ç•Œé¢ä¸Šçš„å­¤ç«‹å…ƒç´ 
- æä¾›æ›´æ¸…æ´çš„è§†è§‰ä½“éªŒ

### 2. æ“ä½œä¾¿åˆ©æ€§
- æ€§èƒ½è°ƒè¯•åŠŸèƒ½æ›´å®¹æ˜“å‘ç°
- ä¸å…¶ä»–å·¥å…·åŠŸèƒ½é€»è¾‘åˆ†ç»„
- å·¥å…·æç¤ºæä¾›æ¸…æ™°çš„åŠŸèƒ½è¯´æ˜

### 3. ç©ºé—´åˆ©ç”¨
- é‡Šæ”¾äº†å³ä¸‹è§’çš„å›ºå®šç©ºé—´
- æ›´å¥½åœ°åˆ©ç”¨å·¥å…·æ ç©ºé—´
- ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•é¢„ç•™ç©ºé—´

## æ€»ç»“

è¿™æ¬¡ä¿®æ”¹æˆåŠŸå°†æ€§èƒ½è°ƒè¯•æŒ‰é’®é›†æˆåˆ°å³ä¾§å·¥å…·æ ä¸­ï¼š

- âœ… **ç•Œé¢ç»Ÿä¸€** - æ‰€æœ‰å·¥å…·æŒ‰é’®é›†ä¸­ç®¡ç†
- âœ… **åŠŸèƒ½å®Œæ•´** - ä¿ç•™æ‰€æœ‰æ€§èƒ½è°ƒè¯•åŠŸèƒ½
- âœ… **ä½“éªŒä¼˜åŒ–** - æ›´ç›´è§‚çš„æŒ‰é’®ä½ç½®å’Œæ ·å¼
- âœ… **ä»£ç æ¸…ç†** - ç§»é™¤é‡å¤ç»„ä»¶å¼•ç”¨

ç°åœ¨ç”¨æˆ·å¯ä»¥åœ¨å³ä¾§å·¥å…·æ ä¸­æ–¹ä¾¿åœ°è®¿é—®æ€§èƒ½è°ƒè¯•åŠŸèƒ½ï¼Œç•Œé¢æ›´åŠ ç»Ÿä¸€å’Œä¸“ä¸šã€‚
