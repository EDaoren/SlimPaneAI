<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIåŒæ­¥é—®é¢˜ä¿®å¤æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .problem-section {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
            border-left: 5px solid #e74c3c;
        }
        .solution-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
            border-left: 5px solid #27ae60;
        }
        .test-section {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            padding: 25px;
            margin: 25px 0;
            border-radius: 12px;
            border-left: 5px solid #3498db;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            border: 1px solid #4a5568;
        }
        .highlight {
            background: #fff3cd;
            padding: 3px 6px;
            border-radius: 4px;
            font-weight: bold;
            color: #856404;
        }
        .badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin: 2px;
        }
        .badge.critical { background: #e74c3c; color: white; }
        .badge.fixed { background: #27ae60; color: white; }
        .badge.test { background: #3498db; color: white; }
        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding: 0;
        }
        .step-list li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            position: relative;
        }
        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: -15px;
            top: 15px;
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .before, .after {
            padding: 20px;
            border-radius: 8px;
        }
        .before {
            background: #fff5f5;
            border: 2px solid #fed7d7;
        }
        .after {
            background: #f0fff4;
            border: 2px solid #c6f6d5;
        }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; }
        h3 { color: #7f8c8d; }
        .emoji { font-size: 1.2em; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="emoji">ğŸ”§</span> UIåŒæ­¥é—®é¢˜ä¿®å¤æµ‹è¯•æŒ‡å—</h1>
            <p>è§£å†³å¤–è§‚è®¾ç½®ä¸­çš„è·¨è®¾ç½®UIçŠ¶æ€æ±¡æŸ“é—®é¢˜</p>
        </div>

        <div class="problem-section">
            <h2><span class="emoji">ğŸ›</span> é—®é¢˜æè¿°</h2>
            <p><strong>æ ¸å¿ƒé—®é¢˜ï¼š</strong>åœ¨éšæœºåˆ‡æ¢å¤šä¸ªå¤–è§‚é…ç½®åï¼Œç‚¹å‡»æŸä¸ªç‰¹å®šè®¾ç½®æ—¶ï¼Œå…¶ä»–è®¾ç½®çš„è§†è§‰çŠ¶æ€ä¼šæ„å¤–æ›´æ–°ï¼Œä½†ä¸ä¼šè§¦å‘å®é™…çš„é…ç½®æ›´æ”¹å¤„ç†å™¨ã€‚</p>
            
            <h3>å…·ä½“è¡¨ç°ï¼š</h3>
            <ol>
                <li>éšæœº/ä¸è§„å¾‹åœ°åˆ‡æ¢ä¸åŒçš„å¤–è§‚è®¾ç½®</li>
                <li>ç‚¹å‡»å­—ä½“å¤§å°é€‰é¡¹</li>
                <li><span class="highlight">é¢„æœŸï¼š</span>åªæœ‰å­—ä½“å¤§å°åº”è¯¥æ”¹å˜</li>
                <li><span class="highlight">å®é™…ï¼š</span>è¯­è¨€å’Œæ¶ˆæ¯å¯†åº¦æŒ‰é’®è§†è§‰ä¸Šæ›´æ–°äº†æ´»åŠ¨çŠ¶æ€ï¼Œä½†å¤„ç†å™¨æœªè§¦å‘</li>
            </ol>

            <div class="comparison">
                <div class="before">
                    <h4><span class="emoji">âŒ</span> ä¿®å¤å‰</h4>
                    <ul>
                        <li>UIçŠ¶æ€åŸºäº <code>userPreferences?.settingName</code></li>
                        <li>å“åº”å¼è¯­å¥åœ¨æ¯æ¬¡æ›´æ–°æ—¶è§¦å‘</li>
                        <li>è·¨è®¾ç½®çŠ¶æ€æ±¡æŸ“</li>
                        <li>å¹»å½±UIæ›´æ–°</li>
                    </ul>
                </div>
                <div class="after">
                    <h4><span class="emoji">âœ…</span> ä¿®å¤å</h4>
                    <ul>
                        <li>UIçŠ¶æ€åŸºäº <code>localUIState.settingName</code></li>
                        <li>ç«‹å³æ›´æ–°æœ¬åœ°çŠ¶æ€</li>
                        <li>è®¾ç½®é—´å®Œå…¨éš”ç¦»</li>
                        <li>ç²¾ç¡®çš„UIæ§åˆ¶</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="solution-section">
            <h2><span class="emoji">ğŸ› ï¸</span> ä¿®å¤æ–¹æ¡ˆ</h2>
            
            <h3><span class="badge fixed">æ ¸å¿ƒä¿®å¤</span> UIçŠ¶æ€éš”ç¦»æœºåˆ¶</h3>
            <p>å¼•å…¥äº† <code>localUIState</code> å¯¹è±¡æ¥ç®¡ç†UIçŠ¶æ€ï¼Œä¸å®é™…çš„ <code>userPreferences</code> åˆ†ç¦»ï¼š</p>
            
            <div class="code-block">
// UIçŠ¶æ€éš”ç¦» - ç”¨äºé˜²æ­¢è·¨è®¾ç½®UIçŠ¶æ€æ±¡æŸ“
let localUIState = {
  theme: '',
  language: '',
  fontSize: '',
  messageDensity: ''
};

// åŒæ­¥æœ¬åœ°UIçŠ¶æ€ - åªåœ¨éæ›´æ–°çŠ¶æ€ä¸‹åŒæ­¥ï¼Œé¿å…å†²çª
$: if (userPreferences && !isUpdatingSettings) {
  localUIState = {
    theme: userPreferences.theme || '',
    language: userPreferences.language || '',
    fontSize: userPreferences.fontSize || '',
    messageDensity: userPreferences.messageDensity || ''
  };
}
            </div>

            <h3><span class="badge fixed">ç«‹å³æ›´æ–°</span> é˜²æ­¢UIé—ªçƒ</h3>
            <p>åœ¨ <code>updateSetting</code> å‡½æ•°ä¸­ç«‹å³æ›´æ–°æœ¬åœ°UIçŠ¶æ€ï¼š</p>
            
            <div class="code-block">
async function updateSetting(key: string, value: any, applyImmediately = false) {
  // ç«‹å³æ›´æ–°æœ¬åœ°UIçŠ¶æ€ï¼Œé˜²æ­¢UIé—ªçƒ
  localUIState = {
    ...localUIState,
    [key]: value
  };
  
  // ç„¶åè¿›è¡Œå®é™…çš„è®¾ç½®æ›´æ–°...
}
            </div>

            <h3><span class="badge fixed">UIç»‘å®šæ›´æ–°</span> ä½¿ç”¨æœ¬åœ°çŠ¶æ€</h3>
            <p>æ‰€æœ‰æŒ‰é’®çš„æ´»åŠ¨çŠ¶æ€ç°åœ¨åŸºäº <code>localUIState</code> è€Œä¸æ˜¯ <code>userPreferences</code>ï¼š</p>
            
            <div class="code-block">
<!-- ä¿®å¤å‰ -->
class="theme-option {userPreferences?.theme === 'light' ? 'theme-option-active' : ''}"

<!-- ä¿®å¤å -->
class="theme-option {localUIState.theme === 'light' ? 'theme-option-active' : ''}"
            </div>
        </div>

        <div class="test-section">
            <h2><span class="emoji">ğŸ§ª</span> æµ‹è¯•æ­¥éª¤</h2>
            
            <h3><span class="badge test">æ­¥éª¤ 1</span> åŸºç¡€éš”ç¦»æµ‹è¯•</h3>
            <ol class="step-list">
                <li>é‡æ–°åŠ è½½æ‰©å±•å¹¶æ‰“å¼€é…ç½®é¡µé¢</li>
                <li>è¿›å…¥"å¤–è§‚"è®¾ç½®é¡µé¢</li>
                <li>ç‚¹å‡»ä»»æ„ä¸»é¢˜é€‰é¡¹ï¼Œè§‚å¯Ÿåªæœ‰ä¸»é¢˜æŒ‰é’®çŠ¶æ€æ”¹å˜</li>
                <li>ç‚¹å‡»ä»»æ„è¯­è¨€é€‰é¡¹ï¼Œè§‚å¯Ÿåªæœ‰è¯­è¨€æŒ‰é’®çŠ¶æ€æ”¹å˜</li>
                <li>ç‚¹å‡»ä»»æ„å­—ä½“å¤§å°ï¼Œè§‚å¯Ÿåªæœ‰å­—ä½“æŒ‰é’®çŠ¶æ€æ”¹å˜</li>
                <li>ç‚¹å‡»ä»»æ„æ¶ˆæ¯å¯†åº¦ï¼Œè§‚å¯Ÿåªæœ‰å¯†åº¦æŒ‰é’®çŠ¶æ€æ”¹å˜</li>
            </ol>

            <h3><span class="badge test">æ­¥éª¤ 2</span> è·¨è®¾ç½®æ±¡æŸ“æµ‹è¯•</h3>
            <ol class="step-list">
                <li>éšæœºå¿«é€Ÿåˆ‡æ¢ä¸»é¢˜ï¼šæµ…è‰²â†’æ·±è‰²â†’è‡ªåŠ¨â†’æµ…è‰²</li>
                <li>ç«‹å³ç‚¹å‡»å­—ä½“å¤§å°"å¤§"</li>
                <li><strong>éªŒè¯ï¼š</strong>åªæœ‰å­—ä½“å¤§å°æŒ‰é’®åº”è¯¥å˜ä¸ºæ´»åŠ¨çŠ¶æ€</li>
                <li>è¯­è¨€å’Œæ¶ˆæ¯å¯†åº¦æŒ‰é’®åº”è¯¥ä¿æŒåŸçŠ¶æ€</li>
                <li>é‡å¤æµ‹è¯•å…¶ä»–è®¾ç½®ç»„åˆ</li>
            </ol>

            <h3><span class="badge test">æ­¥éª¤ 3</span> å¿«é€Ÿè¿ç»­æ“ä½œæµ‹è¯•</h3>
            <ol class="step-list">
                <li>å¿«é€Ÿè¿ç»­ç‚¹å‡»ï¼šä¸»é¢˜â†’è¯­è¨€â†’å­—ä½“â†’å¯†åº¦â†’ä¸»é¢˜</li>
                <li>æ¯æ¬¡ç‚¹å‡»é—´éš”çº¦0.5ç§’</li>
                <li><strong>éªŒè¯ï¼š</strong>æ¯æ¬¡åªæœ‰å¯¹åº”çš„æŒ‰é’®çŠ¶æ€æ”¹å˜</li>
                <li>ä¸åº”è¯¥å‡ºç°å¤šä¸ªæŒ‰é’®åŒæ—¶æ´»åŠ¨çš„æƒ…å†µ</li>
                <li>ä¸åº”è¯¥å‡ºç°æŒ‰é’®çŠ¶æ€æ»åæˆ–é”™è¯¯çš„æƒ…å†µ</li>
            </ol>

            <h3><span class="badge test">æ­¥éª¤ 4</span> æ§åˆ¶å°éªŒè¯</h3>
            <ol class="step-list">
                <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
                <li>åœ¨è¿›è¡Œè®¾ç½®æ›´æ”¹æ—¶è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</li>
                <li>åº”è¯¥çœ‹åˆ°æ¸…æ™°çš„æ—¥å¿—åºåˆ—ï¼š</li>
            </ol>
            
            <div class="code-block">
ğŸ”§ [Options] Updating setting: fontSize = large
âœ… [Options] Setting fontSize updated successfully
            </div>
            
            <p>ä¸åº”è¯¥çœ‹åˆ°å…¶ä»–è®¾ç½®çš„æ„å¤–æ›´æ–°æ—¥å¿—ã€‚</p>
        </div>

        <div class="solution-section">
            <h2><span class="emoji">âœ…</span> æˆåŠŸæ ‡å‡†</h2>
            
            <div class="comparison">
                <div class="before">
                    <h4><span class="emoji">ğŸ¯</span> UIéš”ç¦»</h4>
                    <ul>
                        <li>ç‚¹å‡»ä»»ä½•è®¾ç½®åªå½±å“è¯¥è®¾ç½®çš„UI</li>
                        <li>å…¶ä»–è®¾ç½®çš„è§†è§‰çŠ¶æ€ä¿æŒä¸å˜</li>
                        <li>æ— è·¨è®¾ç½®UIçŠ¶æ€æ±¡æŸ“</li>
                    </ul>
                </div>
                <div class="after">
                    <h4><span class="emoji">âš¡</span> å“åº”æ€§èƒ½</h4>
                    <ul>
                        <li>UIçŠ¶æ€ç«‹å³æ›´æ–°ï¼Œæ— é—ªçƒ</li>
                        <li>è®¾ç½®æ›´æ”¹æµç•…å“åº”</li>
                        <li>æ— å»¶è¿Ÿæˆ–æ»åç°è±¡</li>
                    </ul>
                </div>
            </div>

            <h3><span class="emoji">ğŸ”</span> æŠ€æœ¯éªŒè¯ç‚¹</h3>
            <ul>
                <li><strong>çŠ¶æ€ä¸€è‡´æ€§ï¼š</strong><code>localUIState</code> ä¸å®é™…è®¾ç½®ä¿æŒåŒæ­¥</li>
                <li><strong>æ›´æ–°åŸå­æ€§ï¼š</strong>æ¯æ¬¡åªæœ‰ä¸€ä¸ªè®¾ç½®åœ¨æ›´æ–°</li>
                <li><strong>UIå“åº”æ€§ï¼š</strong>æŒ‰é’®çŠ¶æ€ç«‹å³åæ˜ ç”¨æˆ·æ“ä½œ</li>
                <li><strong>é”™è¯¯æ¢å¤ï¼š</strong>å³ä½¿å‡ºç°é”™è¯¯ï¼ŒUIçŠ¶æ€ä¹Ÿèƒ½æ­£ç¡®æ¢å¤</li>
            </ul>
        </div>

        <div class="test-section">
            <h2><span class="emoji">ğŸš€</span> æŠ€æœ¯äº®ç‚¹</h2>
            
            <h3>1. çŠ¶æ€åˆ†ç¦»æ¶æ„</h3>
            <p>å°†UIçŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€åˆ†ç¦»ï¼Œé¿å…äº†å“åº”å¼ç³»ç»Ÿçš„å‰¯ä½œç”¨ã€‚</p>
            
            <h3>2. ç«‹å³åé¦ˆæœºåˆ¶</h3>
            <p>ç”¨æˆ·æ“ä½œç«‹å³åæ˜ åœ¨UIä¸Šï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
            
            <h3>3. é˜²å†²çªè®¾è®¡</h3>
            <p>é€šè¿‡ <code>isUpdatingSettings</code> æ ‡å¿—é˜²æ­¢å¹¶å‘æ›´æ–°å†²çªã€‚</p>
            
            <h3>4. ä¼˜é›…é™çº§</h3>
            <p>å³ä½¿åœ¨é”™è¯¯æƒ…å†µä¸‹ï¼ŒUIçŠ¶æ€ä¹Ÿèƒ½æ­£ç¡®æ¢å¤å’ŒåŒæ­¥ã€‚</p>
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
            <p><strong>ğŸ‰ ä¿®å¤å®Œæˆï¼</strong></p>
            <p>UIåŒæ­¥é—®é¢˜å·²å½»åº•è§£å†³ï¼Œå¤–è§‚è®¾ç½®ç°åœ¨å…·æœ‰å®Œç¾çš„çŠ¶æ€éš”ç¦»å’Œå“åº”æ€§èƒ½ã€‚</p>
        </div>
    </div>

    <script>
        console.log('ğŸ§ª UIåŒæ­¥é—®é¢˜ä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('ğŸ” è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯ä¿®å¤æ•ˆæœ');
        console.log('ğŸ“Š é‡ç‚¹å…³æ³¨è·¨è®¾ç½®UIçŠ¶æ€éš”ç¦»æµ‹è¯•');
    </script>
</body>
</html>
