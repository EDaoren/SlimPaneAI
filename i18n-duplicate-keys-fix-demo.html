<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国际化重复键修复演示</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .demo-container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 1000px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .demo-subtitle {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .problem-section {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .solution-section {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .problem-title {
            color: #dc2626;
        }

        .solution-title {
            color: #059669;
        }

        .duplicate-keys {
            background: #1f2937;
            color: #f9fafb;
            padding: 16px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 16px 0;
        }

        .key-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .key-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        .key-list li:last-child {
            border-bottom: none;
        }

        .key-list li::before {
            content: "❌";
            font-size: 16px;
        }

        .fix-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .fix-list li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        .fix-list li:last-child {
            border-bottom: none;
        }

        .fix-list li::before {
            content: "✅";
            font-size: 16px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .comparison-section {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }

        .section-header {
            padding: 16px 20px;
            font-weight: 600;
            color: white;
            text-align: center;
        }

        .before-header {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .after-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .section-content {
            padding: 20px;
            background: white;
        }

        .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .impact-section {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .impact-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 12px;
        }

        .impact-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .impact-list li {
            padding: 6px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #374151;
            font-size: 0.9rem;
        }

        .impact-list li::before {
            content: "⚠️";
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1 class="demo-title">国际化重复键修复</h1>
            <p class="demo-subtitle">解决翻译文件中的 <span class="highlight">重复键问题</span></p>
        </div>

        <div class="problem-section">
            <div class="section-title problem-title">
                🚨 发现的问题
            </div>
            <p>在 <code>src/lib/i18n/index.ts</code> 文件中发现了多个重复的翻译键，这会导致JavaScript对象中后面的值覆盖前面的值，从而导致国际化功能不正常工作。</p>
            
            <div class="impact-section">
                <div class="impact-title">影响范围</div>
                <ul class="impact-list">
                    <li>设置页面的导航按钮可能显示错误的翻译</li>
                    <li>模型配置表单的按钮和标签可能不响应语言切换</li>
                    <li>服务提供商管理页面的文本可能保持中文</li>
                    <li>某些翻译键可能返回键名而不是翻译文本</li>
                </ul>
            </div>

            <div class="duplicate-keys">
// 重复的翻译键示例
settings: {
  // 第一次定义
  editModel: '编辑模型',     // 第78行
  addModel: '添加模型',      // 第77行
  cancel: '取消',           // 第12行 (common中)
  close: '关闭',            // 第21行 (common中)
  customModel: '自定义模型', // 第84行
  testConnection: '测试连接', // 第85行
  
  // ... 其他键 ...
  
  // 重复定义 - 会覆盖上面的值！
  editModel: '编辑模型',     // 第131行 ❌
  addModel: '添加模型',      // 第132行 ❌
  cancel: '取消',           // 第134行 ❌
  close: '关闭',            // 第135行 ❌
  customModel: '自定义模型', // 第138行 ❌
  testConnection: '测试连接', // 第179行 ❌
}
            </div>

            <div class="impact-title">发现的重复键</div>
            <ul class="key-list">
                <li><code>editModel</code> - 在第78行和第131行重复定义</li>
                <li><code>addModel</code> - 在第77行和第132行重复定义</li>
                <li><code>cancel</code> - 在第12行（common）和第134行（settings）重复定义</li>
                <li><code>close</code> - 在第21行（common）和第135行（settings）重复定义</li>
                <li><code>customModel</code> - 在第84行和第138行重复定义</li>
                <li><code>testConnection</code> - 在第85行和第179行重复定义</li>
            </ul>
        </div>

        <div class="solution-section">
            <div class="section-title solution-title">
                🔧 修复方案
            </div>
            <p>移除重复的翻译键定义，并更新组件中的翻译键引用，使用正确的命名空间。</p>

            <div class="duplicate-keys">
// 修复后的翻译键结构
settings: {
  // 保留原有的键定义
  editModel: '编辑模型',
  addModel: '添加模型',
  customModel: '自定义模型',
  testConnection: '测试连接',
  
  // 移除重复的键定义
  // ❌ editModel: '编辑模型',     // 已删除
  // ❌ addModel: '添加模型',      // 已删除
  // ❌ customModel: '自定义模型', // 已删除
  // ❌ testConnection: '测试连接', // 已删除
  
  // 保留独有的键
  updateModel: '更新模型',
  provider: '服务商',
  model: '模型',
  // ... 其他键
}

// 通用键使用 common 命名空间
common: {
  cancel: '取消',
  close: '关闭',
  // ... 其他通用键
}
            </div>

            <div class="impact-title">修复内容</div>
            <ul class="fix-list">
                <li>移除 settings 中重复的 <code>editModel</code>、<code>addModel</code> 键定义</li>
                <li>移除 settings 中重复的 <code>cancel</code>、<code>close</code> 键定义</li>
                <li>移除 settings 中重复的 <code>customModel</code>、<code>testConnection</code> 键定义</li>
                <li>更新组件中的翻译键引用，使用 <code>common.cancel</code> 和 <code>common.close</code></li>
                <li>保持其他翻译键的正确引用</li>
            </ul>
        </div>

        <div class="comparison-grid">
            <div class="comparison-section">
                <div class="section-header before-header">❌ 修复前</div>
                <div class="section-content">
                    <h4>问题表现</h4>
                    <ul style="margin: 0; padding-left: 20px;">
                        <li>某些按钮显示翻译键而不是文本</li>
                        <li>语言切换时部分文本不更新</li>
                        <li>控制台出现翻译键未找到的警告</li>
                        <li>国际化功能不稳定</li>
                    </ul>
                    
                    <div style="background: #f3f4f6; padding: 12px; border-radius: 6px; margin-top: 12px; font-family: monospace; font-size: 0.8rem;">
                        console.warn('Translation key not found: settings.editModel')
                    </div>
                </div>
            </div>

            <div class="comparison-section">
                <div class="section-header after-header">✅ 修复后</div>
                <div class="section-content">
                    <h4>修复效果</h4>
                    <ul style="margin: 0; padding-left: 20px;">
                        <li>所有翻译键都能正确解析</li>
                        <li>语言切换立即生效</li>
                        <li>没有翻译键冲突</li>
                        <li>国际化功能稳定可靠</li>
                    </ul>
                    
                    <div style="background: #f0fdf4; padding: 12px; border-radius: 6px; margin-top: 12px; font-family: monospace; font-size: 0.8rem; color: #059669;">
                        🌍 [i18n] All translation keys resolved successfully
                    </div>
                </div>
            </div>
        </div>

        <div style="background: #f3f4f6; border-radius: 12px; padding: 24px; margin-top: 32px;">
            <h3 style="margin-top: 0; color: #1f2937;">🎉 修复完成</h3>
            <p style="color: #374151; margin: 0;">
                通过移除重复的翻译键并更新组件引用，现在国际化系统能够正常工作。
                所有的设置页面、模型配置表单、服务提供商管理等功能都能正确响应语言切换，
                为用户提供一致的多语言体验。
            </p>
        </div>
    </div>
</body>
</html>
